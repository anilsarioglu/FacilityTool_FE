<ion-header>
    <ion-toolbar color="danger">
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/tab1"></ion-back-button>
        </ion-buttons>
        <ion-title class="title">Detail Melding</ion-title>
    </ion-toolbar>
</ion-header>


<ion-content>

    <div id="detailmelding">

        <ion-card>
            <ion-card-header>
                <ion-card-title>{{meldingData.reporter}} - {{meldingData.pNumber}}</ion-card-title>
                <ion-card-subtitle>{{meldingData.date | date:"dd/MM/yy-HHumm"}} </ion-card-subtitle>
            </ion-card-header>

            <ion-card-content>
                <p> {{meldingData.type}}</p>
                <p>{{meldingData.location}}</p>
                <p>Algemene beschrijving: {{meldingData.description}}</p>
                <p>Locatie beschrijving: {{meldingData.locationDescription}}</p>
            </ion-card-content>
        </ion-card>

        <ion-card class="afbeeldingCard">
            <ion-card-header style="color:black">
                Afbeelding:
            </ion-card-header>
            <ion-card-content>
                <ion-slides [options]="sliderOpts">
                    <ion-slide *ngFor="let mlpu of meldingData.photos; let i=index;">
                        <div>
                            <img [src]="mlpu.url" (click)="openPreview(mlpu.url)" alt="Image Preview" tappable>
                        </div>
                    </ion-slide>
                </ion-slides>
            </ion-card-content>
        </ion-card>


        <!-- <div *ngIf="meldingData.reactie.length > 0"> -->
        <div>
            <ion-list>
                <ion-item class="card" *ngFor="let mdr of meldingData.reactie" id="itemke">
                    <ion-avatar class="profilepicposition">
                        <img src="https://toppng.com/uploads/preview/beautiful-icon-vector-shield-marvel-free-icons-and-avengers-a-symbol-11553501608y8qjotnyh0.png">
                    </ion-avatar>
                    <ion-label>
                        <h3 class="naam">{{mdr.name}}</h3>
                        <p class="wrap-text">{{mdr.date | date:"dd/MM/yy-HHumm"}}</p>
                        <p class="wrap-text">{{mdr.message}}</p>
                    </ion-label>
                </ion-item>
            </ion-list>
        </div>


        <div class="chat-container">
            <div class="chat">
                <div class="message">
                    <div *ngIf="message.length">
                        <ion-avatar class="socketAvatar" style="width: 40px;height:40px;">
                            <img src="https://toppng.com/uploads/preview/beautiful-icon-vector-shield-marvel-free-icons-and-avengers-a-symbol-11553501608y8qjotnyh0.png">
                        </ion-avatar>
                        <p>
                            {{this.uploadForm.get('name').value}}
                        </p>
                    </div>
                    <div *ngIf="!message.length">
                        <ion-item *ngFor="let v of values" class="localItem">
                            <ion-avatar class="socketAvatar" style="width: 40px;height:40px;">
                                <img src="https://toppng.com/uploads/preview/beautiful-icon-vector-shield-marvel-free-icons-and-avengers-a-symbol-11553501608y8qjotnyh0.png">
                            </ion-avatar>
                            <div class="localvalues">
                                <p> {{v.name}}</p>
                                <p class="sub">{{v.date | date:"dd/MM/yy-HHumm"}}</p>
                                <p class="sub"> {{v.message}}</p>
                            </div>
                        </ion-item>
                    </div>

                </div>
            </div>
        </div>


        <form [formGroup]="uploadForm" id="formpke">
            <input formControlName="message" maxlength="255" required inputmode="text" id="input" type="text" #input placeholder="Schrijf hier een reactie...">
            <div (click)="sendMessage(input.value)">
                <ion-icon class="send" name="send"></ion-icon>
            </div>
        </form>


    </div>

</ion-content>